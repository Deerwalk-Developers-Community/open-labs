---
import type { GetStaticPaths } from "astro";
import LayoutWithSmallFooter from "#layouts/layout-with-small-footer.astro";
import CoursesSection from "#sections/courses-section.astro";
import { getCollection } from "astro:content";

export const getStaticPaths: GetStaticPaths = async () => {
  const courses = await getCollection("courses");

  const paths = courses.flatMap((course) =>
    course.data.taught_at.map((college: string) => ({
      params: { college },
    })),
  );

  return paths;
};

const { college } = Astro.params;
---

<LayoutWithSmallFooter title=`${college} Open Labs Nepal`>
  <CoursesSection college={college} />
</LayoutWithSmallFooter>
